<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Sticky Notes & Mind Map</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Enhanced Toolbar -->
    <div class="toolbar">
        <div class="toolbar-section">
            <h1 class="app-title">4me</h1>
        </div>

        <div class="toolbar-section toolbar-center">
            <!-- Mode Toggle Buttons -->
            <button id="stickyModeBtn" class="btn btn-mode active" data-mode="sticky"
                title="Switch to Sticky Notes mode">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="4" y="4" width="16" height="16" rx="2" />
                    <path d="M16 4v12l-4 4H4" />
                </svg>
                <span>Sticky Notes</span>
            </button>
            <button id="mindmapModeBtn" class="btn btn-mode" data-mode="mindmap" title="Switch to Mind Map mode">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3" />
                    <circle cx="5" cy="8" r="2" />
                    <circle cx="19" cy="8" r="2" />
                    <circle cx="5" cy="16" r="2" />
                    <circle cx="19" cy="16" r="2" />
                    <path d="M9.5 10.5l2 1M14.5 10.5l-2 1M9.5 13.5l2-1M14.5 13.5l-2-1" />
                </svg>
                <span>Mind Map</span>
            </button>

            <div class="toolbar-divider"></div>

            <!-- Sticky Note Tools (shown in sticky mode) -->
            <div id="stickyTools" class="tool-group">
                <button id="addNoteBtn" class="btn btn-primary" title="Add new sticky note (N)">
                    <span class="btn-icon">+</span>
                    <span>Add Note</span>
                </button>
            </div>

            <!-- Mind Map Tools (shown in mind map mode) -->
            <div id="mindmapTools" class="tool-group hidden">
                <button id="addChildNodeBtn" class="btn btn-primary" title="Add child node">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>
                    <span>Add Child</span>
                </button>
                <button id="addSiblingNodeBtn" class="btn btn-primary" title="Add sibling node">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="12" r="2" />
                        <circle cx="15" cy="12" r="2" />
                    </svg>
                    <span>Add Sibling</span>
                </button>
                <div class="toolbar-divider"></div>
                <button id="zoomInBtn" class="btn btn-tool" title="Zoom In (+)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        <line x1="11" y1="8" x2="11" y2="14" />
                        <line x1="8" y1="11" x2="14" y2="11" />
                    </svg>
                </button>
                <span id="zoomLevel" class="zoom-level">100%</span>
                <button id="zoomOutBtn" class="btn btn-tool" title="Zoom Out (-)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        <line x1="8" y1="11" x2="14" y2="11" />
                    </svg>
                </button>
                <button id="fitToScreenBtn" class="btn btn-tool" title="Fit to Screen">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3" />
                    </svg>
                </button>
                <div class="toolbar-divider"></div>
                <button id="resetMindMapBtn" class="btn btn-tool" title="Reset mind map">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8" />
                        <path d="M21 3v5h-5" />
                    </svg>
                    <span>Reset</span>
                </button>
            </div>

            <div class="toolbar-divider"></div>

            <button id="toggleDrawBtn" class="btn btn-tool" title="Toggle drawing mode (D)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 19l7-7 3 3-7 7-3-3z" />
                    <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" />
                </svg>
                <span>Draw</span>
            </button>

            <button id="clearDrawBtn" class="btn btn-tool" title="Clear all drawings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 20H7L3 16l6-6 5 5" />
                    <path d="m15 9 5 5" />
                </svg>
                <span>Clear Drawing</span>
            </button>

            <div class="toolbar-divider"></div>

            <button id="clearAllBtn" class="btn btn-danger" title="Clear all items">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6" />
                    <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6" />
                </svg>
                <span>Clear All</span>
            </button>
        </div>

        <div class="toolbar-section toolbar-right">
            <div class="color-palette">
                <span class="palette-label">Colors:</span>
                <button class="color-btn active" data-color="#FFF4A3" style="background: #FFF4A3"
                    title="Yellow"></button>
                <button class="color-btn" data-color="#FFB3D9" style="background: #FFB3D9" title="Pink"></button>
                <button class="color-btn" data-color="#B5E7FF" style="background: #B5E7FF" title="Blue"></button>
                <button class="color-btn" data-color="#B8FFB8" style="background: #B8FFB8" title="Green"></button>
                <button class="color-btn" data-color="#FFD4B3" style="background: #FFD4B3" title="Orange"></button>
                <button class="color-btn" data-color="#E5CCFF" style="background: #E5CCFF" title="Purple"></button>
            </div>

            <div class="pen-controls">
                <span class="palette-label">Pen:</span>
                <input type="color" id="penColor" value="#000000" title="Pen color" class="color-input">
                <input type="range" id="penSize" min="1" max="15" value="3" title="Pen size" class="size-slider">
            </div>
        </div>
    </div>

    <!-- Main Board -->
    <div id="board" class="board">
        <!-- Sticky Notes Mode -->
        <div id="stickyBoard" class="sticky-board">
            <canvas id="drawingCanvas" class="drawing-canvas"></canvas>
            <!-- Sticky notes will be added here dynamically -->
        </div>

        <!-- Mind Map Mode with Drawnix-style Interface -->
        <div id="mindmapBoard" class="mindmap-board hidden">
            <!-- Left Toolbar (Drawnix Style) -->
            <div class="mindmap-left-toolbar">
                <div class="tool-section">
                    <button class="tool-btn active" data-tool="select" title="Select (V)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/>
                        </svg>
                    </button>
                    <button class="tool-btn" data-tool="hand" title="Hand Tool (H)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 11V6a2 2 0 00-4 0v5M14 11V4a2 2 0 00-4 0v7m-2 0V9a2 2 0 10-4 0v11a7 7 0 0014 0v-5"/>
                        </svg>
                    </button>
                </div>

                <div class="toolbar-separator"></div>

                <div class="tool-section">
                    <button class="tool-btn" data-tool="node" title="Add Node (N)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                        </svg>
                    </button>
                    <button class="tool-btn" data-tool="circle" title="Add Circle">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="9"/>
                        </svg>
                    </button>
                </div>

                <div class="toolbar-separator"></div>

                <div class="tool-section">
                    <button class="tool-btn" data-tool="connector" title="Draw Connector">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                    <button class="tool-btn" data-tool="text" title="Add Text (T)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="4 7 4 4 20 4 20 7"/>
                            <line x1="9" y1="20" x2="15" y2="20"/>
                            <line x1="12" y1="4" x2="12" y2="20"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Main Canvas Area -->
            <div class="mindmap-canvas-wrapper">
                <svg id="connectionSvg" class="connection-svg"></svg>
                <div id="mindmapContainer" class="mindmap-container">
                    <!-- Mind map nodes will be added here dynamically -->
                </div>
            </div>

        </div>
    </div>

    <!-- Note Template -->
    <template id="noteTemplate">
        <div class="sticky-note">
            <div class="note-header">
                <div class="note-toolbar">
                    <!-- Text Formatting -->
                    <button class="note-format-btn" data-format="bold" title="Bold (Ctrl+B)">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5">
                            <path d="M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6zM6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z" />
                        </svg>
                    </button>
                    <button class="note-format-btn" data-format="italic" title="Italic (Ctrl+I)">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="19" y1="4" x2="10" y2="4" />
                            <line x1="14" y1="20" x2="5" y2="20" />
                            <line x1="15" y1="4" x2="9" y2="20" />
                        </svg>
                    </button>
                    <button class="note-format-btn" data-format="underline" title="Underline (Ctrl+U)">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M6 3v7a6 6 0 006 6 6 6 0 006-6V3" />
                            <line x1="4" y1="21" x2="20" y2="21" />
                        </svg>
                    </button>
                    <button class="note-format-btn" data-format="strikeThrough" title="Strikethrough">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M16 4H9a3 3 0 00-2.83 4" />
                            <path d="M14 12a4 4 0 010 8H6" />
                            <line x1="4" y1="12" x2="20" y2="12" />
                        </svg>
                    </button>
                    <div class="toolbar-divider-small"></div>
                    <!-- Lists -->
                    <button class="note-format-btn" data-format="insertUnorderedList" title="Bullet List">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="8" y1="6" x2="21" y2="6" />
                            <line x1="8" y1="12" x2="21" y2="12" />
                            <line x1="8" y1="18" x2="21" y2="18" />
                            <circle cx="4" cy="6" r="1" fill="currentColor" />
                            <circle cx="4" cy="12" r="1" fill="currentColor" />
                            <circle cx="4" cy="18" r="1" fill="currentColor" />
                        </svg>
                    </button>
                    <button class="note-format-btn" data-format="insertOrderedList" title="Numbered List">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="10" y1="6" x2="21" y2="6" />
                            <line x1="10" y1="12" x2="21" y2="12" />
                            <line x1="10" y1="18" x2="21" y2="18" />
                            <path d="M4 5h2v4M4 9h2M4 13h2l-2 4h2M4 17v4" />
                        </svg>
                    </button>
                    <div class="toolbar-divider-small"></div>
                    <!-- Code Block -->
                    <button class="note-format-btn" data-format="code" title="Code Block">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="16 18 22 12 16 6" />
                            <polyline points="8 6 2 12 8 18" />
                        </svg>
                    </button>
                    <div class="toolbar-divider-small"></div>
                    <!-- Font Size -->
                    <select class="note-font-size" title="Font Size">
                        <option value="12px">Small</option>
                        <option value="15px" selected>Normal</option>
                        <option value="18px">Large</option>
                        <option value="22px">X-Large</option>
                    </select>
                </div>
                <div class="note-actions">
                    <button class="note-btn note-pin" title="Pin note">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path
                                d="M12 17v5m-3-2l3-3 3 3M9 10.76a2 2 0 01-1.11 1.79l-1.78.9A2 2 0 005 15.24V16a1 1 0 001 1h12a1 1 0 001-1v-.76a2 2 0 00-1.11-1.79l-1.78-.9A2 2 0 0115 10.76V7a1 1 0 011-1 2 2 0 000-4H8a2 2 0 000 4 1 1 0 011 1z" />
                        </svg>
                    </button>
                    <button class="note-btn note-delete" title="Delete note">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="note-content" contenteditable="true" placeholder="Type your note here..."></div>
            <div class="note-footer">
                <span class="note-timestamp"></span>
            </div>
        </div>
    </template>

    <!-- Mind Map Node Template -->
    <template id="mindMapTemplate">
        <div class="mindmap-node">
            <div class="node-actions">
                <button class="node-action-btn node-add-child" title="Add child node">+</button>
                <button class="node-action-btn node-delete" title="Delete node">×</button>
            </div>
            <div class="mindmap-content" contenteditable="true" spellcheck="false">New Node</div>
        </div>
    </template>

    <!-- Modal Container -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title"></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body"></div>
            <div class="modal-footer">
                <button class="btn btn-tool modal-cancel">Cancel</button>
                <button class="btn btn-danger modal-confirm">Confirm</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>